@startuml Web訪問者システム-削除シーケンス図
hide footbox
skinparam boundaryBackgroundColor #D5E8D4
skinparam controlBackgroundColor  #F8CECC
skinparam entityBackgroundColor   #DAE8FC

actor ユーザー as A
boundary 訪問者一覧画面 as B1
boundary 削除確認ダイアログ as B2
control 削除処理 as C1
entity 訪問者情報 as E

A -> B1: 削除対象を選択
B1 -> B2: 削除確認ダイアログ表示

alt ユーザーが「削除」を選択（基本フロー）
    A -> B2: 「削除する」を選択
    B2 -> C1: 削除要求
    activate C1
    C1 -> E: 対象データ削除
    activate E
    E --> C1: 削除結果
    deactivate E

    alt 削除成功
        C1 -> B1: 更新後の一覧を表示
        B1 -> A: 削除結果一覧を表示
    else 削除失敗（代替フロー3）
        C1 -> B1: 「削除処理に失敗しました」表示
        B1 -> A: 一覧画面を再表示
    end
    deactivate C1

else ユーザーが「キャンセル」を選択（代替フロー1）
    A -> B2: 「キャンセル」を選択
    B2 -> B1: 削除処理を行わず一覧に戻る
    B1 -> A: 一覧画面を再表示

else 対象データが存在しない（代替フロー2）
    B2 -> C1: 削除要求
    C1 -> E: データ確認
    E --> C1: データなし
    C1 -> B1: 「対象データが存在しません」表示
    B1 -> A: 一覧画面を再表示
end

@enduml
